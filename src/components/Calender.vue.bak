<template>
  <div>{{allDates}}</div>
</template>
<script>
export default {
  name: 'Calender',
  data() {
    const currentYear = 2018;
    const currentMonth = 12;
    const currentDate = 28;
    const firstDate = new Date(currentYear, currentMonth - 1, 1);
    const lastDate = new Date(currentYear, currentMonth, 0);
    const firstDateWeekDay = firstDate.getDay();
    const lastDateWeekDay = lastDate.getDay();
    const prevoustMonthDates = [];
    const currentMonthDates = [];
    const postMonthDates = [];

    const allDates = [];

    // console.log(firstDateWeekDay);
    // console.log(lastDateWeekDay);

    let s = 0;

    if (firstDateWeekDay > 0) {
      let prevousMonth;
      let prevousMonthYear;
      if (currentMonth === 1) {
        prevousMonth = 12;
        prevousMonthYear = currentYear - 1;
      } else {
        prevousMonth = currentMonth - 1;
        prevousMonthYear = currentYear;
      }
      const prevousMonthLastDate = new Date(prevousMonthYear, prevousMonth - 1, 0).getDate();
      for (let i = firstDateWeekDay - 1; i > 0; i--) {
        const dateInfo = {
          type: 'prevous',
          date: prevousMonthLastDate - i,
        };
        prevoustMonthDates.push(dateInfo);

        s++;
        if ((s + 1) % 7 === 0) allDates.push(dateInfo);
      }
    }
    for (let i = 1; i <= lastDate.getDate(); i++) {
      const dateInfo = {
        type: 'current',
        date: i,
      };
      currentMonthDates.push(dateInfo);
      allDates.push(dateInfo);
    }
    if (lastDateWeekDay < 6) {
      let postDate = 0;
      for (let i = lastDateWeekDay; i <= 6; i++) {
        postDate++;
        const dateInfo = {
          type: 'post',
          date: postDate,
        };
        postMonthDates.push(dateInfo);
        allDates.push(dateInfo);
      }
    }
    // console.log(prevoustMonthDates);
    // console.log(currentMonthDates);
    // console.log(postMonthDates);
    console.log(allDates);
    return {
      allDates,
    };
  },
};
</script>
